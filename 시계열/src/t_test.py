# -*- coding: utf-8 -*-
"""t-test.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/18gB4ueVukY_VCeB7E3oSLqu06MlkHgTS
"""



from scipy.stats import ttest_rel
import numpy as np

def paired_t_test_metric(metric_esn, metric_lstm, metric_name="Sharpe Ratio"):
    t_stat, p_value = ttest_rel(metric_lstm, metric_esn)  # LSTM - ESN

    print(f"ğŸ“Š Paired t-test ({metric_name})")
    print(f" - Mean {metric_name} (LSTM): {np.mean(metric_lstm):.4f}")
    print(f" - Mean {metric_name} (ESN) : {np.mean(metric_esn):.4f}")
    print(f" - t-statistic: {t_stat:.4f}")
    print(f" - p-value    : {p_value:.4f}")

    if p_value < 0.05:
        better = "LSTM" if np.mean(metric_lstm) > np.mean(metric_esn) else "ESN"
        print(f"âœ… ìœ ì˜ë¯¸í•œ ì°¨ì´ ì¡´ì¬ â†’ {better} ëª¨ë¸ì´ {metric_name} ê¸°ì¤€ìœ¼ë¡œ ìš°ìˆ˜í•©ë‹ˆë‹¤.\n")
    else:
        print("âš–ï¸  í†µê³„ì ìœ¼ë¡œ ìœ ì˜ë¯¸í•œ ì°¨ì´ë¥¼ ë°œê²¬í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.\n")

# ìƒ¤í”„ì§€ìˆ˜ ë¹„êµ
paired_t_test_metric(sharpe_esn_list, sharpe_lstm_list, metric_name="Sharpe Ratio")

# MDDëŠ” ì ˆëŒ“ê°’ì´ ì‘ì„ìˆ˜ë¡ ì¢‹ìœ¼ë¯€ë¡œ ìŒìˆ˜ì´ì§€ë§Œ ë¹„êµ ë°©ì‹ì€ ë™ì¼
paired_t_test_metric(mdd_esn_list, mdd_lstm_list, metric_name="MDD")